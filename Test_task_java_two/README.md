# Тестовое задание по созданию программы для работы кофеварки управляемую через браузер
_______________________________________________________________________________________
На момент написания readme версия приложения 1.0.3

### Стек 
SpringBoot, PostgesSQL, SwaggeUI, Docker

### Постановка задачи
 Написать программу для работы кофеварки и управляемую через браузер.
 Использовать SpringFramework или SpringBoot.
 Вести учет работы в PostgesSQL.
 Интерфейс не нужен, запросы через на SwaggeUI.

### Описание
 Кофемашина "CoffeeMachineA".

1. String 				Показать текущий объем воды и кофе
2. boolean 				Приготовить “Американо”
3. boolean 				Приготовить “Эспрессо”
4. boolean 				Приготовить “Двойной эспрессо”
5. boolean 				Заполнить бак с водой
6. boolean 				Заполнить бак с кофе
7. boolean				Заполнить одновременно бак с водой и бак с кофе
8. List<CoffeeMachineA> Информация

При выборе первого пункта, происходит запрос к БД с поиском последней записи из которой будут
выбраны значения кол-ва оствашейся воды и кол-во оставшегося кофе.
При выборе 2-4 пункта, должно “приготовиться” кофе. При проведении запроса происходит обращение
к фабрике "напитков". Далее по переданной в метод строке (названии напитка) будет выбран класс
из которого будет получено количество затрачиваемых ингредиентов. Далее происходит подсчет 
достаточно ли ингредиентов в наличии. Если да то вычитаем из имеющихся ингредиентов затрачиваемые
и сохраняем как событие "Id, Приготовление 'Название напитка', Текущее время/дата, кол-во оставшийся воды,
кол-во оставшегося кофе".
5-7 пункт должны иммитировать полное заполнение бака с водой и кофе.
8 пункт служит для отображения статистики использования кофемашины.
При старте программы оба бака должны быть заполнены. 

В корневой папке проекта находится файл docker-compose.yml в нем находится конфигурация БД.
Ссылка на swagger-ui: localhost:8080/swagger-ui.html 

#### Класс CoffeeMachineAService и интерфейс NavigationBar.
 Реализует методы:
	getTheLatestEntryCoffeeMachine() Метод отвечающий за получение последней записи из БД, 
 последняя запись будет выбрана по дате, возвращает CoffeeMachineA из которой будем брать уровень
 воды и кол-во кофе.
	makingACoffeeDrink(String coffeeDrink) метод принимает название напитка и выполняет запросы 
 к БД и расчитывает затраты на приготовление.

 Так же класс перегружает методы из интерфейса:
	String showTheCurrentVolumeOfWaterAndCoffee() показать текущий объем воды и кофе
    List<CoffeeMachineA> getInformation() информация о статистике использования
    boolean prepareAmericano()        приготовить американо
    boolean prepareEspresso()         приготовить экспрессо
    boolean prepareDoubleEspresso()   приготовить двойной экспрессо
    boolean fillTheWaterTank()        заполнить бак с водой
    boolean fillCoffeeTank()          заполнить бак с кофе
    boolean fillAll()				  одновреммено заполнить баки с кофе и водой
	
 Приготовление любого кофе проходит через одинаковые этапы: 
	запрашиваем из бд уровень воды и наличие кофе
    если бак с кофе и водой не пустые то кофе сварено
    сохраняем событие в бд
	
#### Класс BeveragesCoffeeFactory.
 Является реализацией паттерна фабрика. Реализует методы:
	createCoffeeBeverages(String coffee) принимает сторку которая содержит название напитка
 который требуется приготовть. Через switch определяем какой класс нужно вернуть.

#### Класс AbstractCoffeeBeverages и Americano, DoubleEspresso, Espresso.
 Является абстрактным классом от которого наследуются все классы классефицирующиеся как напитки.
 Если конкретнее то классы Americano, DoubleEspresso, Espresso. В классе содержится два поля int
 это количество затрачиваемой воды на приготовление и затрачиваемое количество кофе. И два геттера
 которые возвращают значения указанных выше полей класса.
 
#### Класс DataInit.
 Имплементирует интерфейс ApplicationRunner. 
 Класс предназначен для "заполнения" баков с ингредиенами при "включении" кофемашины.
 
#### Класс SwaggerConfig.
 Класс служит для более подробного документирования. Вся информация отобразится в запущенном приложении 
 при переходе по ссылке: 
 localhost:8080/swagger-ui.html

### Таблица в бд
```sql	
CREATE TABLE event
(
    Id BIGINT PRIMARY KEY,
    occurred_event VARCHAR(64) NOT NULL,
    event_date  TIMESTAMP NOT NULL,
    water_fill_level INTEGER,
    coffee_fill_level INTEGER
);
```